<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StartupEval | Intelligent Startup Evaluation</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
       
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }
       
        .container {
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
        }
       
        header {
            text-align: center;
            padding: 30px 0;
            position: relative;
        }
       
        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 10px;
        }
       
        .logo-icon {
            font-size: 32px;
            color: #2ecc71;
        }
       
        h1 {
            font-size: 2.8rem;
            background: linear-gradient(90deg, #2ecc71, #3498db);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }
       
        .subtitle {
            font-size: 1.2rem;
            color: #555;
            margin-bottom: 30px;
        }
       
        .search-container {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            margin-bottom: 30px;
            position: relative;
            z-index: 10;
        }
       
        .search-box {
            display: flex;
            align-items: center;
            border: 2px solid #e0e0e0;
            border-radius: 50px;
            padding: 5px 20px;
            transition: border-color 0.3s;
        }
       
        .search-box:focus-within {
            border-color: #3498db;
        }
       
        .search-box i {
            color: #7f8c8d;
            font-size: 20px;
        }
       
        .search-input {
            flex: 1;
            border: none;
            padding: 15px;
            font-size: 1.1rem;
            outline: none;
        }
       
        .autocomplete-box {
            position: absolute;
            top: 100%;
            left: 20px;
            right: 20px;
            background: white;
            border-radius: 0 0 12px 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            max-height: 300px;
            overflow-y: auto;
            z-index: 100;
            display: none;
        }
       
        .autocomplete-item {
            padding: 15px 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            border-bottom: 1px solid #f0f0f0;
            transition: background 0.2s;
        }
       
        .autocomplete-item:hover {
            background: #f9f9f9;
        }
       
        .autocomplete-item i {
            margin-right: 15px;
            color: #3498db;
            font-size: 20px;
        }
       
        .autocomplete-item .name {
            font-weight: 500;
            font-size: 1.1rem;
            color: #2c3e50;
        }
       
        .autocomplete-item .domain {
            margin-left: auto;
            color: #7f8c8d;
        }
       
        .company-info {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            margin-bottom: 30px;
            display: none;
            position: absolute;
            width: calc(100% - 40px);
            max-width: 1160px;
            transition: top 0.8s ease-in-out, opacity 0.8s ease-in-out, transform 0.8s ease-in-out;
            transform: translateY(20px);
            opacity: 0;
            z-index: 5;
        }
       
        .company-info.visible {
            transform: translateY(0);
            opacity: 1;
        }
       
        .company-info.moving {
            transition: top 0.8s ease-in-out, opacity 0.8s ease-in-out, transform 0.8s ease-in-out;
        }
       
        .status-panel {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            transition: margin-top 0.3s ease;
        }
       
        .status-panel.card-visible {
            margin-top: 350px;
        }
       
        @media (max-width: 768px) {
            .status-panel.card-visible {
                margin-top: 500px;
            }
        }
       
        .status-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            text-align: center;
            min-width: 200px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
       
        .status-icon {
            font-size: 28px;
            margin-bottom: 15px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
       
        .system-status .status-icon {
            background: rgba(46, 204, 113, 0.2);
            color: #2ecc71;
        }
       
        .analysis-status .status-icon {
            background: rgba(52, 152, 219, 0.2);
            color: #3498db;
            animation: pulse 2s infinite;
        }
       
        .status-title {
            font-size: 1rem;
            color: #7f8c8d;
            margin-bottom: 8px;
        }
       
        .status-value {
            font-size: 1.4rem;
            font-weight: 600;
            color: #2c3e50;
        }
       
        .typing-container {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            margin-bottom: 30px;
            text-align: center;
        }
       
        .typing-text {
            font-size: 1.5rem;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #2c3e50;
            font-weight: 500;
        }
       
        .cursor {
            display: inline-block;
            width: 10px;
            height: 1.5rem;
            background-color: #2ecc71;
            margin-left: 5px;
            animation: blink 0.7s infinite;
        }
       
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }
       
        .status-bar {
            height: 6px;
            background: #eee;
            border-radius: 3px;
            margin: 20px 0;
            overflow: hidden;
        }
       
        .status-progress {
            height: 100%;
            width: 30%;
            background: linear-gradient(90deg, #2ecc71, #3498db);
            border-radius: 3px;
            animation: pulse 2s infinite;
        }
       
        @keyframes pulse {
            0% { opacity: 0.7; }
            50% { opacity: 1; }
            100% { opacity: 0.7; }
        }
       
        .status-text {
            display: flex;
            justify-content: space-between;
            color: #777;
            font-size: 0.9rem;
        }
       
        .upload-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
       
        .upload-card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            text-align: center;
            transition: transform 0.3s ease;
            position: relative;
            min-height: 320px;
            display: flex;
            flex-direction: column;
        }
       
        .upload-card:hover {
            transform: translateY(-5px);
        }
       
        .upload-icon {
            font-size: 42px;
            color: #3498db;
            margin-bottom: 15px;
            transition: transform 0.3s ease, color 0.3s ease;
        }
       
        .upload-card:hover .upload-icon {
            transform: scale(1.1);
            color: #2ecc71;
        }
       
        .upload-title {
            font-size: 1.2rem;
            color: #2c3e50;
            margin-bottom: 10px;
            font-weight: 600;
        }
       
        .upload-desc {
            color: #7f8c8d;
            margin-bottom: 20px;
            font-size: 0.95rem;
            line-height: 1.4;
        }
       
        .file-input {
            display: none;
        }
       
        .file-label {
            display: inline-block;
            padding: 12px 25px;
            background: #2ecc71;
            color: white;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            box-shadow: 0 4px 6px rgba(46, 204, 113, 0.2);
        }
       
        .file-label:hover {
            background: #27ae60;
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(46, 204, 113, 0.3);
        }
       
        .file-label:active {
            transform: translateY(0);
            box-shadow: 0 2px 4px rgba(46, 204, 113, 0.2);
        }
       
        .file-name {
            margin-top: 15px;
            font-size: 0.9rem;
            color: #7f8c8d;
            min-height: 20px;
            transition: color 0.3s ease;
            flex-grow: 0;
        }
       
        .file-name.has-file {
            color: #e74c3c;
        }
       
        .file-name.uploaded .upload-status {
            color: #2ecc71;
        }
       
        .file-progress {
            height: 6px;
            background: #eee;
            border-radius: 3px;
            margin-top: 10px;
            overflow: hidden;
        }
       
        .file-progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #2ecc71, #3498db);
            border-radius: 3px;
            transition: width 0.3s ease;
        }
       
        .kpi-toggle {
            margin-top: 15px;
            width: 100%;
            flex-grow: 0;
        }
       
        .kpi-toggle-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
            padding: 10px 15px;
            background: #f8f9fa;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            color: #3498db;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }
       
        .kpi-toggle-btn:hover {
            background: #e8f4fc;
            border-color: #3498db;
        }
       
        .kpi-toggle-btn i:first-child {
            margin-right: 5px;
        }
       
        .kpi-toggle-btn i:last-child {
            margin-left: auto;
            transition: transform 0.3s ease;
        }
       
        .kpi-toggle-btn.active i:last-child {
            transform: rotate(180deg);
        }
       
        .manual-input-dropdown {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease;
            flex-grow: 1;
            min-height: 0;
        }
       
        .manual-input-dropdown.active {
            max-height: 500px;
        }
       
        .manual-input {
            margin-top: 15px;
            padding: 15px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            background: #f8f9fa;
            text-align: left;
            animation: fadeIn 0.5s ease-out;
        }
       
        .manual-input h4 {
            font-size: 1rem;
            color: #2c3e50;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
       
        .manual-input h4::before {
            content: '\f303';
            font-family: 'Font Awesome 5 Free';
            font-weight: 900;
            color: #3498db;
        }
       
        .manual-input input,
        .manual-input textarea {
            width: 100%;
            padding: 12px 15px;
            margin-bottom: 12px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            outline: none;
        }
       
        .manual-input input:focus,
        .manual-input textarea:focus {
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }
       
        .manual-input input::placeholder,
        .manual-input textarea::placeholder {
            color: #a0a0a0;
        }
       
        .manual-input input {
            padding-left: 40px;
            background-position: 12px center;
            background-repeat: no-repeat;
            background-size: 18px;
        }
       
        #kpi-cash-balance-input {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%237f8c8d'%3E%3Cpath d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm.31-8.86c-1.77-.45-2.34-.94-2.34-1.67 0-.84.79-1.43 2.1-1.43 1.38 0 1.9.66 1.94 1.64h1.71c-.05-1.34-.87-2.57-2.49-2.97V5H10.9v1.69c-1.51.32-2.72 1.3-2.72 2.81 0 1.79 1.49 2.69 3.66 3.21 1.95.46 2.34 1.15 2.34 1.87 0 .53-.39 1.39-2.1 1.39-1.6 0-2.23-.72-2.32-1.64H8.04c.1 1.7 1.36 2.66 2.86 2.97V19h2.34v-1.67c1.52-.29 2.72-1.16 2.73-2.77-.01-2.2-1.9-2.96-3.66-3.42z'/%3E%3C/svg%3E");
        }
       
        #kpi-burn-rate-input {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%237f8c8d'%3E%3Cpath d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm2.5-11.5h-2v5h2v-5zm-5 3h-2v2h2v-2zm7 0h-2v2h2v-2z'/%3E%3C/svg%3E");
        }
       
        #kpi-revenue-input {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%237f8c8d'%3E%3Cpath d='M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z'/%3E%3C/svg%3E");
        }
       
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
       
        .api-section {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            margin-bottom: 30px;
        }
       
        .api-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }
       
        .api-title {
            font-size: 1.5rem;
            color: #2c3e50;
        }
       
        .fetch-btn {
            padding: 12px 25px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: background 0.3s;
        }
       
        .fetch-btn:hover {
            background: #2980b9;
        }
       
        .analysis-results {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
       
        .analysis-box {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            min-height: 200px;
            font-family: monospace;
            white-space: pre-wrap;
            color: #2c3e50;
            overflow-x: auto;
        }
       
        .analysis-box h3 {
            font-size: 1.1rem;
            color: #2c3e50;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            align-items: center;
            gap: 8px;
        }
       
        .analysis-box h3 i {
            color: #3498db;
        }
       
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            gap: 20px;
            height: 100%;
        }
       
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
       
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
       
        .founder-question-section {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            margin-bottom: 30px;
            position: relative;
        }
       
        .founder-question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }
       
        .founder-question-title {
            font-size: 1.5rem;
            color: #2c3e50;
        }
       
        .ai-enhance-dropdown {
            position: relative;
            display: inline-block;
        }
       
        .ai-enhance-btn {
            padding: 10px 16px;
            background: #9b59b6;
            color: white;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
       
        .ai-enhance-btn:hover {
            background: #8e44ad;
        }
       
        .ai-enhance-dropdown-content {
            display: none;
            position: absolute;
            right: 0;
            top: 100%;
            background-color: white;
            min-width: 200px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
            border-radius: 8px;
            z-index: 1;
            margin-top: 5px;
            overflow: hidden;
        }
       
        .ai-enhance-dropdown-content a {
            color: #2c3e50;
            padding: 12px 16px;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: background-color 0.3s;
        }
       
        .ai-enhance-dropdown-content a:hover {
            background-color: #f8f9fa;
        }
       
        .ai-enhance-dropdown-content a i {
            color: #9b59b6;
            width: 20px;
        }
       
        .ai-enhance-dropdown:hover .ai-enhance-dropdown-content {
            display: block;
        }
       
        .question-input-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
       
        .question-input {
            width: 100%;
            padding: 15px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            min-height: 100px;
            resize: vertical;
            outline: none;
            transition: border-color 0.3s;
        }
       
        .question-input:focus {
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }
       
        .question-buttons {
            display: flex;
            gap: 15px;
            justify-content: flex-end;
        }
       
        .question-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
        }
       
        .call-btn {
            background: #2ecc71;
            color: white;
        }
       
        .call-btn:hover {
            background: #27ae60;
        }
       
        .email-btn {
            background: #e74c3c;
            color: white;
        }
       
        .email-btn:hover {
            background: #c0392b;
        }
       
        footer {
            text-align: center;
            padding: 20px;
            color: #7f8c8d;
            font-size: 0.9rem;
        }
       
        .signin-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            padding: 10px 20px;
            background: #4285f4;
            color: white;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: background 0.3s;
        }
       
        .signin-btn:hover {
            background: #357ae8;
        }
       
        .signin-btn i {
            font-size: 18px;
        }
       
        .user-info {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.9rem;
            color: #2c3e50;
        }
       
        .user-info img {
            width: 32px;
            height: 32px;
            border-radius: 50%;
        }
       
        .signout-btn {
            padding: 8px 16px;
            background: #e74c3c;
            color: white;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-weight: 500;
            transition: background 0.3s;
        }
       
        .signout-btn:hover {
            background: #c0392b;
        }
       
        .cors-warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            font-size: 0.9rem;
        }
       
        @media (max-width: 768px) {
            h1 {
                font-size: 2.2rem;
            }
           
            .typing-text {
                font-size: 1.2rem;
            }
           
            .upload-section {
                grid-template-columns: 1fr;
            }
           
            .status-panel {
                flex-direction: column;
                align-items: center;
            }
           
            .status-card {
                width: 100%;
                max-width: 300px;
            }
           
            .search-container {
                padding: 15px;
            }
           
            .autocomplete-box {
                left: 15px;
                right: 15px;
            }
           
            .company-header {
                flex-direction: column;
                text-align: center;
            }
           
            .company-logo {
                margin-right: 0;
                margin-bottom: 15px;
            }
           
            .info-grid {
                grid-template-columns: 1fr;
            }
           
            .company-info {
                width: calc(100% - 30px);
            }
           
            .manual-input input,
            .manual-input textarea {
                padding: 10px 12px;
                font-size: 0.85rem;
            }
           
            .manual-input input {
                padding-left: 35px;
                background-size: 16px;
            }
           
            .signin-btn, .user-info {
                top: 10px;
                right: 10px;
            }
           
            .founder-question-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
           
            .ai-enhance-dropdown {
                align-self: flex-end;
            }
           
            .question-buttons {
                flex-direction: column;
            }
        }
        .company-header {
    display: flex;
    align-items: center;
    margin-bottom: 25px;
}
.company-logo {
    width: 80px;
    height: 80px;
    border-radius: 12px;
    margin-right: 20px;
}
.company-logo img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    border-radius: 12px;
}
.company-details h2 {
    font-size: 1.8rem;
    color: #2c3e50;
    margin-bottom: 5px;
}
.company-domain {
    color: #7f8c8d;
    font-size: 1.1rem;
}
.attribution {
    font-size: 0.9rem;
    color: #7f8c8d;
    margin-top: 10px;
}
.attribution a {
    color: #3498db;
    text-decoration: none;
}
.attribution a:hover {
    text-decoration: underline;
}
.info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    margin-bottom: 25px;
}
.info-card {
    background: #f8f9fa;
    border-radius: 8px;
    padding: 20px;
    display: flex;
    align-items: center;
}
.info-icon {
    width: 50px;
    height: 50px;
    background: rgba(52, 152, 219, 0.1);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 15px;
    font-size: 20px;
    color: #3498db;
}
.info-content h3 {
    font-size: 0.9rem;
    color: #7f8c8d;
    margin-bottom: 5px;
}
.info-content p {
    font-size: 1.1rem;
    color: #2c3e50;
    font-weight: 500;
}
.founders-section h3 {
    font-size: 1.2rem;
    color: #2c3e50;
    margin-bottom: 15px;
    padding-bottom: 10px;
    border-bottom: 1px solid #f0f0f0;
}
.founders-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 15px;
}
.founder-card {
    background: #f8f9fa;
    border-radius: 8px;
    padding: 15px;
    display: flex;
    align-items: center;
}
.founder-avatar {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    margin-right: 15px;
}
.founder-avatar img {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    object-fit: cover;
}
.founder-details h4 {
    font-size: 1rem;
    color: #2c3e50;
    margin-bottom: 3px;
}
.founder-details p {
    font-size: 0.9rem;
    color: #7f8c8d;
}
.extraction-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 8px;
    margin: 15px 0;
    padding: 15px;
    background: #f8f9fa;
    border-radius: 6px;
    border-left: 4px solid #3498db;
}

.extraction-item {
    display: flex;
    justify-content: space-between;
    padding: 6px 0;
    border-bottom: 1px solid #e9ecef;
}

.extraction-item:last-child {
    border-bottom: none;
}

.extraction-item strong {
    color: #2c3e50;
    font-weight: 600;
    min-width: 140px;
}

.extraction-item span {
    color: #34495e;
    text-align: right;
    flex: 1;
    word-break: break-word;
}

/* Loading animation improvements */
.loading {
    text-align: center;
    padding: 20px;
}

.spinner {
    border: 3px solid #f3f3f3;
    border-top: 3px solid #3498db;
    border-radius: 50%;
    width: 24px;
    height: 24px;
    animation: spin 1s linear infinite;
    margin: 0 auto 10px;
    display: block;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <i class="fas fa-rocket logo-icon"></i>
                <h1>StartupEval</h1>
            </div>
            <p class="subtitle">Intelligent startup evaluation powered by AI</p>
            <button class="signin-btn" id="signin-btn" style="display: block;">
                <i class="fab fa-google"></i> Sign in with Google
            </button>
            <div class="user-info" id="user-info" style="display: none;">
                <img id="user-photo" src="" alt="User Photo">
                <span id="user-name"></span>
                <button class="signout-btn" id="signout-btn">Sign Out</button>
            </div>
        </header>
       
        <div class="search-container">
            <div class="search-box">
                <i class="fas fa-search"></i>
                <input type="text" class="search-input" id="search-input" placeholder="Search for a startup...">
            </div>
            <div class="autocomplete-box" id="autocomplete-box"></div>
        </div>
       
        <div class="company-info" id="company-info"></div>
       
        <div class="status-panel" id="status-panel">
            <div class="status-card system-status">
                <div class="status-icon">
                    <i class="fas fa-check-circle"></i>
                </div>
                <div class="status-title">System Status</div>
                <div class="status-value">Ready</div>
            </div>
           
            <div class="status-card analysis-status">
                <div class="status-icon">
                    <i class="fas fa-chart-line"></i>
                </div>
                <div class="status-title">Analysis</div>
                <div class="status-value">Active</div>
            </div>
        </div>
       
        <div class="typing-container">
            <div class="typing-text" id="typing-text"></div>
            <div class="status-bar">
                <div class="status-progress"></div>
            </div>
            <div class="status-text">
                <span>Processing: Ready for uploads</span>
                <span>AI Models: Loaded</span>
            </div>
        </div>
       
        //CORS Warning for Local Development 
        <div class="cors-warning" id="cors-warning" style="display: none;">
            <i class="fas fa-exclamation-triangle" style="margin-right: 8px;"></i>
            <strong>Local Development Notice:</strong> File uploads are disabled in local development due to CORS restrictions. 
            Please deploy to a web server (Firebase Hosting, Netlify, etc.) for full functionality.
        </div>
       
        <div class="upload-section">
            <div class="upload-card">
                <i class="fas fa-file-pdf upload-icon"></i>
                <h3 class="upload-title">Pitch Deck</h3>
                <p class="upload-desc">Upload the startup's pitch deck (PDF format)</p>
                <input type="file" id="pitch-deck" class="file-input" accept=".pdf">
                <label for="pitch-deck" class="file-label">Choose PDF</label>
                <div class="file-name" id="pitch-deck-name"></div>
                <div class="file-progress" id="pitch-deck-progress"><div class="file-progress-bar"></div></div>
            </div>
           
            <div class="upload-card">
                <i class="fas fa-file-alt upload-icon"></i>
                <h3 class="upload-title">Call Transcript</h3>
                <p class="upload-desc">Upload transcript from investor calls (text format)</p>
                <input type="file" id="transcript" class="file-input" accept=".txt,.doc,.docx">
                <label for="transcript" class="file-label">Choose File</label>
                <div class="file-name" id="transcript-name"></div>
                <div class="file-progress" id="transcript-progress"><div class="file-progress-bar"></div></div>
            </div>
           
            <div class="upload-card">
                <i class="fas fa-video upload-icon"></i>
                <h3 class="upload-title">Video Content</h3>
                <p class="upload-desc">Upload pitch videos, demos, or presentations</p>
                <input type="file" id="video-content" class="file-input" accept=".mp4,.mov,.avi,.mkv">
                <label for="video-content" class="file-label">Choose Video</label>
                <div class="file-name" id="video-content-name"></div>
                <div class="file-progress" id="video-content-progress"><div class="file-progress-bar"></div></div>
            </div>
           
            <div class="upload-card">
                <i class="fas fa-microphone upload-icon"></i>
                <h3 class="upload-title">Audio Recordings</h3>
                <p class="upload-desc">Upload pitch recordings, interviews, or podcasts</p>
                <input type="file" id="audio-recordings" class="file-input" accept=".mp3,.wav,.m4a,.aac">
                <label for="audio-recordings" class="file-label">Choose Audio</label>
                <div class="file-name" id="audio-recordings-name"></div>
                <div class="file-progress" id="audio-recordings-progress"><div class="file-progress-bar"></div></div>
            </div>
           
            <div class="upload-card">
                <i class="fas fa-file-upload upload-icon"></i>
                <h3 class="upload-title">Other Documents</h3>
                <p class="upload-desc">Upload any other relevant documents or files</p>
                <input type="file" id="other-documents" class="file-input" accept="*">
                <label for="other-documents" class="file-label">Choose File</label>
                <div class="file-name" id="other-documents-name"></div>
                <div class="file-progress" id="other-documents-progress"><div class="file-progress-bar"></div></div>
            </div>
           
            <div class="upload-card">
                <i class="fas fa-user-edit upload-icon"></i>
                <h3 class="upload-title">Founder Updates</h3>
                <p class="upload-desc">Upload or enter recent founder updates</p>
                <input type="file" id="founder-updates" class="file-input" accept=".txt,.pdf,.doc,.docx">
                <label for="founder-updates" class="file-label">Choose File</label>
                <div class="file-name" id="founder-updates-name"></div>
                <div class="file-progress" id="founder-updates-progress"><div class="file-progress-bar"></div></div>
                <div class="kpi-toggle">
                    <button class="kpi-toggle-btn">
                        <i class="fas fa-chart-line"></i>
                        Manual KPI Entry
                        <i class="fas fa-chevron-down"></i>
                    </button>
                </div>
                <div class="manual-input-dropdown">
                    <div class="manual-input">
                        <h4>Manual KPI Entry</h4>
                        <input type="text" id="kpi-cash-balance-input" placeholder="Cash Balance (e.g., $500k)">
                        <input type="text" id="kpi-burn-rate-input" placeholder="Net Burn Rate (e.g., $50k/month)">
                        <input type="text" id="kpi-revenue-input" placeholder="Recent MRR or monthly revenue (e.g., $100K)">
                        <textarea id="narrative-input" placeholder="Enter recent progress or challenges..."></textarea>
                    </div>
                </div>
            </div>
        </div>
       
        <div class="api-section" id="api-section">
            <div class="api-header">
                <h2 class="api-title">Startup Analysis Results</h2>
                <button class="fetch-btn" id="fetch-data">
                    <i class="fas fa-bolt"></i>
                    Generate Analysis
                </button>
            </div>
            <div class="analysis-results" id="analysis-results">
                <div class="analysis-box" id="deck-extraction">
                    <h3><i class="fas fa-file-pdf"></i> Pitch Deck Extraction</h3>
                    <div class="placeholder-text">Analysis of pitch deck will appear here...</div>
                </div>
                <div class="analysis-box" id="company-data">
                    <h3><i class="fas fa-database"></i> Company's Digital Footprint</h3>
                    <div class="placeholder-text">Company information from online sources will appear here...</div>
                </div>
                <div class="analysis-box" id="investment-memo">
                    <h3><i class="fas fa-file-invoice-dollar"></i> Investment Memorandum</h3>
                    <div class="placeholder-text">Investment recommendation will appear here...</div>
                </div>
            </div>
        </div>
       
        <div class="founder-question-section">
            <div class="founder-question-header">
                <h2 class="founder-question-title">Ask Founders a Question</h2>
                <div class="ai-enhance-dropdown">
                    <button class="ai-enhance-btn">
                        <i class="fas fa-robot"></i> Enhance using AI
                        <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="ai-enhance-dropdown-content">
                        <a href="#" id="enhance-email">
                            <i class="fas fa-envelope"></i> For Email
                        </a>
                        <a href="#" id="enhance-call">
                            <i class="fas fa-phone"></i> For Call Agent
                        </a>
                    </div>
                </div>
            </div>
            <div class="question-input-container">
                <textarea class="question-input" id="question-input" placeholder="Type your question for the founders here..."></textarea>
                <div class="question-buttons">
                    <button class="question-btn call-btn" id="call-btn">
                        <i class="fas fa-phone"></i> Call via Agent
                    </button>
                    <button class="question-btn email-btn" id="email-btn">
                        <i class="fas fa-envelope"></i> Send Email
                    </button>
                </div>
            </div>
        </div>
       
        <footer>
            <p>© 2023 StartupEval | Intelligent Startup Evaluation Platform</p>
        </footer>
    </div>
   
    <!-- Firebase SDK Module - Enhanced Global Exposure -->
<script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.13.1/firebase-app.js';
    import { 
        getAuth, 
        GoogleAuthProvider, 
        signInWithPopup, 
        signOut, 
        onAuthStateChanged 
    } from 'https://www.gstatic.com/firebasejs/10.13.1/firebase-auth.js';
    import { 
        getStorage, 
        ref, 
        uploadBytesResumable,  // ← CORRECTED: Use resumable for progress tracking
        getDownloadURL 
    } from 'https://www.gstatic.com/firebasejs/10.13.1/firebase-storage.js';
    import { 
        getFirestore,
        collection, 
        doc, 
        setDoc, 
        getDoc 
    } from 'https://www.gstatic.com/firebasejs/10.13.1/firebase-firestore.js';
    import { 
        getFunctions, 
        httpsCallable 
    } from 'https://www.gstatic.com/firebasejs/10.13.1/firebase-functions.js';
    
    // Your web app's Firebase configuration
    const firebaseConfig = {
         apiKey: "AIzaSyBKcwO-L1zL4jWRimBHdVgtXqZ6snRT_Ng",
  authDomain: "startup-evaluation-472010.firebaseapp.com",
  projectId: "startup-evaluation-472010",
  storageBucket: "startup-evaluation-472010.firebasestorage.app",
  messagingSenderId: "229321540719",
  appId: "1:229321540719:web:cbdf6d3928f80e1ee7399a",
  measurementId: "G-CFMXZLW3CT"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const storage = getStorage(app);
    
    // Updated: Explicitly specify databaseId as '(default)'
    const db = getFirestore(app, '(default)');
    
    const functions = getFunctions(app);

    // Make Firebase services globally available
    window.firebaseApp = app;
    window.firebaseAuth = auth;
    window.firebaseStorage = storage;
    window.firebaseFirestore = db;
    window.firebaseFunctions = functions;
    window.GoogleAuthProvider = GoogleAuthProvider;
    window.signInWithPopup = signInWithPopup;
    window.signOut = signOut;
    window.onAuthStateChanged = onAuthStateChanged;
    window.httpsCallable = httpsCallable;
    window.ref = ref;
    window.uploadBytesResumable = uploadBytesResumable;  // ← CORRECTED: Export resumable version
    window.getDownloadURL = getDownloadURL;
    window.doc = doc;
    window.setDoc = setDoc;
    window.getDoc = getDoc;
    window.collection = collection;

    // Create Firebase namespace for compatibility
    window.firebase = {
        auth: auth,
        storage: storage,
        firestore: db,
        functions: functions,
        app: app
    };

    // Check for local development
    if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
        window.isLocalDevelopment = true;
        const corsWarning = document.getElementById('cors-warning');
        if (corsWarning) {
            corsWarning.style.display = 'block';
        }
    } else {
        window.isLocalDevelopment = false;
    }

    console.log('Firebase initialized successfully - Gen 2 Functions Ready');
    window.firebaseReady = true;
</script>

    <!-- Main Application Script -->
    <script>
        // Wait for Firebase to be ready
        function waitForFirebase() {
            return new Promise((resolve) => {
                if (window.firebaseReady) {
                    resolve();
                } else {
                    const checkFirebase = setInterval(() => {
                        if (window.firebaseReady) {
                            clearInterval(checkFirebase);
                            resolve();
                        }
                    }, 100);
                    
                    // Timeout after 5 seconds
                    setTimeout(() => {
                        clearInterval(checkFirebase);
                        console.error('Firebase initialization timeout');
                        resolve(); // Still resolve to prevent hanging
                    }, 5000);
                }
            });
        }

        // Initialize app when DOM is loaded
        document.addEventListener('DOMContentLoaded', async function() {
            await waitForFirebase();
            
            if (!window.GoogleAuthProvider) {
                console.error('GoogleAuthProvider not available');
                showFirebaseError();
                return;
            }

            initializeApp();
        });

        function showFirebaseError() {
            const typingText = document.getElementById('typing-text');
            typingText.innerHTML = 'Firebase initialization failed. Please refresh the page.<span class="cursor"></span>';
        }

        function initializeApp() {
            // Track uploaded files
            const uploadedFiles = {}; // Key: inputId, Value: downloadURL
            
            // DOM elements
            const signinBtn = document.getElementById('signin-btn');
            const userInfo = document.getElementById('user-info');
            const userPhoto = document.getElementById('user-photo');
            const userName = document.getElementById('user-name');
            const signoutBtn = document.getElementById('signout-btn');
            const searchInput = document.getElementById('search-input');
            const autocompleteBox = document.getElementById('autocomplete-box');
            const companyInfo = document.getElementById('company-info');
            const fetchDataBtn = document.getElementById('fetch-data');
            const deckExtractionBox = document.getElementById('deck-extraction');
            const companyDataBox = document.getElementById('company-data');
            const investmentMemoBox = document.getElementById('investment-memo');
            const questionInput = document.getElementById('question-input');
            const callBtn = document.getElementById('call-btn');
            const emailBtn = document.getElementById('email-btn');
            const enhanceEmail = document.getElementById('enhance-email');
            const enhanceCall = document.getElementById('enhance-call');
            const statusPanel = document.getElementById('status-panel');
           
            // Mock database of startups
            const startups = [
                {
                    id: 1,
                    name: "Airbnb",
                    domain: "airbnb.com",
                    employees: "5000-10000",
                    founded: 2008,
                    founders: [
                        { name: "Brian Chesky", role: "CEO" },
                        { name: "Joe Gebbia", role: "CPO" },
                        { name: "Nathan Blecharczyk", role: "CTO" }
                    ],
                    industry: "Travel Technology",
                    valuation: "$35B"
                },
                {
                    id: 2,
                    name: "Uber",
                    domain: "uber.com",
                    employees: "10000+",
                    founded: 2009,
                    founders: [
                        { name: "Travis Kalanick", role: "Former CEO" },
                        { name: "Garrett Camp", role: "Co-founder" }
                    ],
                    industry: "Transportation",
                    valuation: "$72B"
                },
                {
                    id: 3,
                    name: "SpaceX",
                    domain: "spacex.com",
                    employees: "5000-10000",
                    founded: 2002,
                    founders: [
                        { name: "Elon Musk", role: "CEO" }
                    ],
                    industry: "Aerospace",
                    valuation: "$74B"
                },
                {
                    id: 4,
                    name: "Stripe",
                    domain: "stripe.com",
                    employees: "1000-5000",
                    founded: 2010,
                    founders: [
                        { name: "Patrick Collison", role: "CEO" },
                        { name: "John Collison", role: "President" }
                    ],
                    industry: "Financial Technology",
                    valuation: "$95B"
                },
                {
                    id: 5,
                    name: "Robinhood",
                    domain: "robinhood.com",
                    employees: "1000-5000",
                    founded: 2013,
                    founders: [
                        { name: "Baiju Bhatt", role: "Co-CEO" },
                        { name: "Vlad Tenev", role: "Co-CEO" }
                    ],
                    industry: "Financial Technology",
                    valuation: "$11.7B"
                },
                {
                    id: 6,
                    name: "Snowflake",
                    domain: "snowflake.com",
                    employees: "1000-5000",
                    founded: 2012,
                    founders: [
                        { name: "Benoit Dageville", role: "President of Products" },
                        { name: "Thierry Cruanes", role: "CTO" },
                        { name: "Marcin Żukowski", role: "Co-founder" }
                    ],
                    industry: "Cloud Computing",
                    valuation: "$84B"
                }
            ];

            // API keys
            const API_MARKET_KEY = 'cmfduc121000pjs0481s34d9e';
            const LOGO_API_KEY = 'sk_NE5PQxn6TJy4wTgEB7Hitg';

            // Helper Functions
            function showLoading(element) {
                element.innerHTML = `
                    <div class="loading">
                        <div class="spinner"></div>
                        <div>Analyzing data...</div>
                    </div>
                `;
            }

            function populateCompanyData() {
                companyDataBox.innerHTML = `
                    <h3><i class="fas fa-database"></i> Company Data</h3>
                    <div><strong>Online Presence:</strong> Strong with 4.8/5 rating on G2</div>
                    <div><strong>Founded:</strong> January 2021</div>
                    <div><strong>Headquarters:</strong> San Francisco, CA</div>
                    <div><strong>Employee Count:</strong> 12-15 (LinkedIn data)</div>
                    <div><strong>Recent News:</strong> Featured in TechCrunch last month</div>
                    <div><strong>Competitive Landscape:</strong> Differentiated by vertical-specific solutions</div>
                    <div><strong>Online Sentiment:</strong> Positive with minimal complaints</div>
                `;
            }

            function populateInvestmentMemo() {
                investmentMemoBox.innerHTML = `
                    <h3><i class="fas fa-file-invoice-dollar"></i> Investment Memorandum</h3>
                    <div><strong>Recommendation:</strong> STRONG BUY</div>
                    <div><strong>Investment Thesis:</strong>
                    - Solving real pain point for growing SMEs
                    - Strong product-market fit evidenced by traction
                    - Experienced team with relevant background
                    - Large and growing market opportunity</div>
                    <div><strong>Risks:</strong>
                    - Competitive landscape evolving quickly
                    - Customer concentration (top 3 customers = 45% of revenue)
                    - Execution risk in scaling sales team</div>
                    <div><strong>Valuation:</strong> $20M pre-money valuation appears reasonable given traction</div>
                    <div><strong>Expected Return:</strong> Potential for 10x return in 5 years based on conservative projections</div>
                `;
            }

            // Enhanced Generate Analysis with Firebase Functions
            // Enhanced Generate Analysis with Firebase Functions
// Replace your existing fetchDataBtn event listener with this FIXED version
fetchDataBtn.addEventListener('click', async function() {
    // Show loading state
    showLoading(deckExtractionBox);
    showLoading(companyDataBox);
    showLoading(investmentMemoBox);

    const user = window.firebaseAuth.currentUser;
    if (!user) {
        alert('Please sign in to generate analysis.');
        return;
    }

    console.log("🔍 DEBUG: Starting analysis for user:", user.uid);
    console.log("🔍 DEBUG: PDF uploaded:", !!uploadedFiles['pitch-deck']);
    console.log("🔍 DEBUG: PDF URL:", uploadedFiles['pitch-deck']);

    // Process pitch deck if uploaded
    if (uploadedFiles['pitch-deck']) {
        try {
            // Show processing message
            deckExtractionBox.innerHTML = `
                <h3><i class="fas fa-file-pdf"></i> Pitch Deck Extraction</h3>
                <div class="loading">
                    <div class="spinner"></div>
                    <div>Extracting pitch deck with Vertex AI Gemini...</div>
                </div>
            `;

            // For local development, simulate the result
            if (window.isLocalDevelopment) {
                setTimeout(() => {
                    deckExtractionBox.innerHTML = `
                        <h3><i class="fas fa-file-pdf"></i> Pitch Deck Extraction</h3>
                        <div><strong>Company:</strong> XR Commerce Studio</div>
                        <div><strong>Value Proposition:</strong> AR/VR commerce platform</div>
                        <div><strong>Market Size:</strong> $50B TAM</div>
                        <div><strong>Traction:</strong> 10K MAU, $500K ARR</div>
                        <div><strong>Team:</strong> 8 engineers, 3 founders</div>
                        <div><strong>Funding Ask:</strong> $2M Seed</div>
                        <div><strong>Use of Funds:</strong> Product dev & marketing</div>
                        <div style="margin-top: 15px; padding: 10px; background: #e8f5e8; border-radius: 4px; font-size: 0.9em; color: #2c3e50;">
                            <i class="fas fa-info-circle" style="color: #f39c12; margin-right: 5px;"></i>
                            Simulated extraction for local development
                        </div>
                    `;
                }, 2000);
            } else {
                // FIXED: Proper Callable Function call with error handling
                console.log("🔍 Calling processPitchDeck function...");
                
                try {
                    // Step 1: Test storage access first
                    console.log("🔍 Step 1: Testing storage access...");
                    const testStorage = window.httpsCallable(window.firebaseFunctions, 'testStorageAccess');
                    const storageResult = await testStorage({ pdfUrl: uploadedFiles['pitch-deck'] });
                    console.log("✅ Storage test result:", storageResult.data);

                    if (storageResult.data.success) {
                        console.log("✅ Storage access confirmed - calling main function");
                        
                        // Step 2: Call the actual processing function
                        const processPitchDeck = window.httpsCallable(window.firebaseFunctions, 'processPitchDeck');
                        console.log("🔍 Function object:", processPitchDeck);
                        
                        const result = await processPitchDeck({ pdfUrl: uploadedFiles['pitch-deck'] });
                        console.log("🎉 ProcessPitchDeck result:", result.data);
                        
                        // Process the result
                        if (result.data && result.data.success) {
                            const extractedData = result.data.data || {};
                            const extractionId = result.data.extractionId;
                            
                            console.log("✅ Extraction successful:", extractedData);
                            
                            // Display extracted data
                            deckExtractionBox.innerHTML = `
                                <h3><i class="fas fa-file-pdf"></i> Pitch Deck Extraction</h3>
                                <div class="extraction-grid">
                                    <div class="extraction-item">
                                        <strong>Company:</strong>
                                        <span>${extractedData.company || 'Not specified'}</span>
                                    </div>
                                    <div class="extraction-item">
                                        <strong>Value Proposition:</strong>
                                        <span>${extractedData.valueProposition || 'Not specified'}</span>
                                    </div>
                                    <div class="extraction-item">
                                        <strong>Market Size:</strong>
                                        <span>${extractedData.marketSize || 'Not specified'}</span>
                                    </div>
                                    <div class="extraction-item">
                                        <strong>Traction:</strong>
                                        <span>${extractedData.traction || 'Not specified'}</span>
                                    </div>
                                    <div class="extraction-item">
                                        <strong>Team:</strong>
                                        <span>${extractedData.team || 'Not specified'}</span>
                                    </div>
                                    <div class="extraction-item">
                                        <strong>Funding Ask:</strong>
                                        <span>${extractedData.fundingAsk || 'Not specified'}</span>
                                    </div>
                                    <div class="extraction-item">
                                        <strong>Use of Funds:</strong>
                                        <span>${extractedData.useOfFunds || 'Not specified'}</span>
                                    </div>
                                    ${extractedData.businessModel ? `
                                    <div class="extraction-item">
                                        <strong>Business Model:</strong>
                                        <span>${extractedData.businessModel}</span>
                                    </div>
                                    ` : ''}
                                    ${extractedData.competitiveLandscape ? `
                                    <div class="extraction-item">
                                        <strong>Competitive Landscape:</strong>
                                        <span>${extractedData.competitiveLandscape}</span>
                                    </div>
                                    ` : ''}
                                    ${extractedData.goToMarket ? `
                                    <div class="extraction-item">
                                        <strong>Go-to-Market:</strong>
                                        <span>${extractedData.goToMarket}</span>
                                    </div>
                                    ` : ''}
                                </div>
                                <div style="margin-top: 15px; padding: 10px; background: #e8f5e8; border-radius: 4px; font-size: 0.9em; color: #2c3e50;">
                                    <i class="fas fa-check-circle" style="color: #2ecc71; margin-right: 5px;"></i>
                                    Successfully extracted using Vertex AI Gemini model
                                    <br><small>Extraction ID: ${extractionId}</small>
                                </div>
                            `;
                            
                            // Optional: Save to localStorage
                            try {
                                localStorage.setItem(`pitchDeckExtraction_${user.uid}`, JSON.stringify({
                                    data: extractedData,
                                    timestamp: new Date().toISOString(),
                                    extractionId: extractionId
                                }));
                            } catch (e) {
                                console.warn('localStorage save failed:', e);
                            }
                            
                        } else {
                            throw new Error(`Function returned: ${JSON.stringify(result.data)}`);
                        }
                        
                    } else {
                        throw new Error(`Storage test failed: ${JSON.stringify(storageResult.data)}`);
                    }
                    
                } catch (callError) {
                    console.error("💥 Callable function error:", callError);
                    throw callError; // Re-throw to main catch block
                }
                
            }
            
        } catch (error) {
            console.error("💥 MAIN ERROR BLOCK:", error);
            console.error("Error code:", error.code);
            console.error("Error message:", error.message);
            
            let errorMessage = error.message || 'Unknown error';
            let suggestion = 'Please try again.';
            
            if (error.code === 'functions/internal') {
                errorMessage = 'Server processing error (500)';
                suggestion = 'The mock function is working, but there may be a client-side issue. Check the console.';
            } else if (error.code === 'unavailable') {
                errorMessage = 'Service temporarily unavailable';
                suggestion = 'The function may be taking too long. Try again.';
            } else if (error.code === 'unauthenticated') {
                errorMessage = 'Authentication required';
                suggestion = 'Please sign in again.';
            }
            
            deckExtractionBox.innerHTML = `
                <h3><i class="fas fa-file-pdf"></i> Pitch Deck Extraction</h3>
                <div style="color: #e74c3c;">
                    <i class="fas fa-exclamation-triangle" style="margin-right: 5px;"></i>
                    ${errorMessage}
                </div>
                <div style="margin-top: 10px; padding: 8px; background: #fdf2f2; border-radius: 4px; font-size: 0.85em; color: #c0392b;">
                    <i class="fas fa-info-circle" style="margin-right: 5px;"></i>
                    Debug info: ${error.code || 'unknown'}
                </div>
                <div style="margin-top: 10px; font-size: 0.8em; color: #95a5a6;">
                    <strong>PDF URL:</strong> ${uploadedFiles['pitch-deck']?.substring(0, 50)}${uploadedFiles['pitch-deck']?.length > 50 ? '...' : ''}
                </div>
            `;
        }
    } else {
        deckExtractionBox.innerHTML = `
            <h3><i class="fas fa-file-pdf"></i> Pitch Deck Extraction</h3>
            <div style="color: #7f8c8d;">
                <i class="fas fa-info-circle" style="margin-right: 5px;"></i>
                No pitch deck uploaded. Upload a PDF to enable AI extraction.
            </div>
        `;
    }

    // Populate other sections
    setTimeout(() => populateCompanyData(), 1500);
    setTimeout(() => populateInvestmentMemo(), 3000);
});

// Format Question Functions
            callBtn.addEventListener('click', function() {
                if (questionInput.value.trim() === '') {
                    alert('Please enter a question first');
                    return;
                }
               
                const formattedQuestion = `[CALL AGENT SCRIPT]\n\nHello, this is [Your Name] from [Your Firm]. I have a question about your startup:\n\n"${questionInput.value}"\n\nCould you please provide some additional details on this? Thank you.`;
                questionInput.value = formattedQuestion;
            });
           
            emailBtn.addEventListener('click', function() {
                if (questionInput.value.trim() === '') {
                    alert('Please enter a question first');
                    return;
                }
               
                const formattedQuestion = `Subject: Question Regarding Your Startup\n\nDear Founder,\n\nI hope this email finds you well.\n\nI was reviewing your materials and had a question:\n\n${questionInput.value}\n\nCould you please provide some additional context or information about this?\n\nThank you for your time and I look forward to your response.\n\nBest regards,\n[Your Name]\n[Your Title]\n[Your Firm]`;
                questionInput.value = formattedQuestion;
            });
           
            // AI Enhance Functions
            enhanceCall.addEventListener('click', function(e) {
                e.preventDefault();
                if (questionInput.value.trim() === '') {
                    alert('Please enter a question first');
                    return;
                }
               
                // Simulate AI enhancement for call agent
                questionInput.value = `[AI-ENHANCED FOR CALL]\n\nQuestion: ${questionInput.value}\n\nSuggested approach: Frame this as an open-ended question to encourage detailed response. Consider asking for specific metrics or examples where applicable.`;
            });
           
            enhanceEmail.addEventListener('click', function(e) {
                e.preventDefault();
                if (questionInput.value.trim() === '') {
                    alert('Please enter a question first');
                    return;
                }
               
                // Simulate AI enhancement for email
                questionInput.value = `[AI-ENHANCED FOR EMAIL]\n\nOriginal question: ${questionInput.value}\n\nEnhanced version: Could you elaborate on ${questionInput.value}? We're particularly interested in understanding how this aligns with your long-term growth strategy and what measurable impact it has had so far.`;
            });

            // Authentication state listener
            window.onAuthStateChanged(window.firebaseAuth, user => {
                if (user) {
                    // User is signed in
                    signinBtn.style.display = 'none';
                    userInfo.style.display = 'flex';
                    userName.textContent = user.displayName || 'User';
                    userPhoto.src = user.photoURL || 'https://via.placeholder.com/32';
                    updateUIForSignedInUser();
                } else {
                    // User is signed out
                    signinBtn.style.display = 'block';
                    userInfo.style.display = 'none';
                    updateUIForSignedOutUser();
                }
            });

            // Google Sign-In
            signinBtn.addEventListener('click', async () => {
                try {
                    const provider = new window.GoogleAuthProvider();
                    await window.signInWithPopup(window.firebaseAuth, provider);
                } catch (error) {
                    console.error('Sign-in error:', error);
                    alert('Error signing in: ' + error.message);
                }
            });

            // Sign Out
            signoutBtn.addEventListener('click', async () => {
                try {
                    await window.signOut(window.firebaseAuth);
                } catch (error) {
                    console.error('Sign-out error:', error);
                    alert('Error signing out: ' + error.message);
                }
            });

            // Update UI based on auth state
            function updateUIForSignedInUser() {
                if (window.isLocalDevelopment) {
                    // In local development, keep file inputs disabled but show warning
                    document.querySelectorAll('.fetch-btn').forEach(element => {
                        element.disabled = false;
                    });
                    document.querySelectorAll('.file-input').forEach(element => {
                        element.disabled = true;
                    });
                    document.getElementById('typing-text').innerHTML = 'Signed in! File uploads disabled in local development<span class="cursor"></span>';
                } else {
                    document.querySelectorAll('.file-input, .fetch-btn').forEach(element => {
                        element.disabled = false;
                    });
                    document.getElementById('typing-text').innerHTML = 'Ready to upload startup documents<span class="cursor"></span>';
                }
            }

            function updateUIForSignedOutUser() {
                document.querySelectorAll('.file-input, .fetch-btn').forEach(element => {
                    element.disabled = true;
                });
                document.getElementById('typing-text').innerHTML = 'Please sign in to upload documents<span class="cursor"></span>';
            }

            // Debounce function
            function debounce(func, wait) {
                let timeout;
                return function (...args) {
                    clearTimeout(timeout);
                    timeout = setTimeout(() => func.apply(this, args), wait);
                };
            }

            // Enhanced File upload handler with CORS handling
            // Enhanced File upload handler with CORS handling
// Enhanced File upload handler with better auth checking and non-blocking Firestore writes
// Enhanced File upload handler - CORRECTED FOR MODULAR SDK
async function setupFileInput(inputId, fileNameId, progressId) {
    const fileInput = document.getElementById(inputId);
    const fileName = document.getElementById(fileNameId);
    const progressElement = document.getElementById(progressId);
    const progressBar = progressElement ? progressElement.querySelector('.file-progress-bar') : null;

    if (!fileInput || !fileName || !progressBar) {
        console.error(`One or more elements not found: inputId=${inputId}, fileNameId=${fileNameId}, progressId=${progressId}`);
        return;
    }

    fileInput.addEventListener('change', async function() {
        // Enhanced authentication check
        const user = window.firebaseAuth.currentUser;
        if (!user) {
            console.error('No user authenticated');
            alert('Please sign in to upload files. Redirecting to sign-in...');
            this.value = '';
            return;
        }

        console.log('User authenticated for upload:', user.uid);

        // Check if running in local development
        if (window.isLocalDevelopment) {
            const maxLength = 20;
            let displayName = this.files[0].name;
            const extension = this.files[0].name.split('.').pop().toLowerCase();
           
            if (displayName.length > maxLength) {
                const namePart = displayName.substring(0, maxLength - 4 - extension.length);
                displayName = `${namePart}...${extension}`;
            }
            
            fileName.innerHTML = `<span class="file-part">${displayName}</span> <span style="color: #f39c12;">(Local - Simulated)</span>`;
            fileName.classList.add('has-file');
            progressBar.style.width = '100%';
            
            // Simulate upload URL for local development - specifically for pitch deck
            if (inputId === 'pitch-deck') {
                uploadedFiles[inputId] = `local-simulated://pitch-deck.pdf`;
            } else {
                uploadedFiles[inputId] = `local-simulated://${this.files[0].name}`;
            }
            return;
        }

        if (this.files.length > 0) {
            const file = this.files[0];
            
            // Validate file type for pitch deck
            if (inputId === 'pitch-deck' && file.type !== 'application/pdf') {
                alert('Please upload a PDF file for the pitch deck.');
                this.value = '';
                return;
            }
            
            const maxLength = 20;
            let displayName = file.name;
            const extension = file.name.split('.').pop().toLowerCase();
           
            if (displayName.length > maxLength) {
                const namePart = displayName.substring(0, maxLength - 4 - extension.length);
                displayName = `${namePart}...${extension}`;
            }
          
            fileName.innerHTML = `<span class="file-part">${displayName}</span> <i class="fas fa-spinner fa-spin" style="margin-left: 5px; color: #3498db;"></i>`;
            fileName.classList.add('has-file');
            progressBar.style.width = '0%';

            try {
                // Refresh auth token to ensure it's current
                await user.getIdToken(true);
                console.log('Auth token refreshed for user:', user.uid);
                
                // Special handling for pitch deck files
                let storagePath;
                if (inputId === 'pitch-deck') {
                    storagePath = `uploads/${user.uid}/pitch-decks/${Date.now()}_pitch-deck.pdf`;
                } else {
                    storagePath = `uploads/${user.uid}/${inputId}/${Date.now()}_${file.name}`;
                }
                
                console.log('Uploading to path:', storagePath);
                
                const storageRef = window.ref(window.firebaseStorage, storagePath);
                
                // CORRECTED: Use uploadBytesResumable for progress tracking
                const uploadTask = window.uploadBytesResumable(storageRef, file);
                
                // CORRECTED: Use the new progress callback pattern
                uploadTask.on('state_changed',
                    (snapshot) => {
                        // Observe state change events like progress, pause, and resume
                        const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
                        progressBar.style.width = progress + '%';
                        console.log('Upload progress:', progress + '%');
                        
                        // Update status text
                        switch (snapshot.state) {
                            case 'paused':
                                console.log('Upload is paused');
                                break;
                            case 'running':
                                console.log('Upload is running');
                                break;
                        }
                    },
                    (uploadError) => {
                        // Handle unsuccessful uploads
                        console.error('Upload failed:', uploadError);
                        let errorDisplay = 'Upload failed';
                        let suggestion = 'Please try again.';
                        
                        if (uploadError.code === 'storage/unauthorized') {
                            errorDisplay = 'Permission denied';
                            suggestion = 'Please sign in again and try uploading.';
                        } else if (uploadError.code === 'storage/quota-exceeded') {
                            errorDisplay = 'Storage quota exceeded';
                            suggestion = 'Your storage quota has been reached.';
                        } else if (uploadError.code === 'storage/canceled') {
                            errorDisplay = 'Upload canceled';
                            suggestion = 'The upload was canceled.';
                        } else {
                            errorDisplay = `Upload failed: ${uploadError.message}`;
                            suggestion = 'Check your connection and try again.';
                        }
                        
                        fileName.innerHTML = `<span style="color: #e74c3c;">${errorDisplay}</span>`;
                        fileName.classList.remove('has-file');
                        progressBar.style.width = '0%';
                        
                        console.error('Detailed upload error:', {
                            code: uploadError.code,
                            message: uploadError.message,
                            user: user ? user.uid : 'no user',
                            path: storagePath
                        });
                        
                        // Reset file input
                        this.value = '';
                    },
                    async () => {
                        // Handle successful uploads on complete
                        try {
                            const downloadURL = await window.getDownloadURL(storageRef);
                            console.log(`${inputId} uploaded successfully:`, downloadURL);
                           
                            // TRACK UPLOADED FILE URL FOR VERTEX AI PROCESSING
                            uploadedFiles[inputId] = downloadURL;
                           
                            // Update UI immediately
                            if (inputId === 'pitch-deck') {
                                fileName.innerHTML = `<span class="file-part">${displayName}</span> <span class="upload-status" style="color: #27ae60;">(Pitch Deck Ready)</span>`;
                            } else {
                                fileName.innerHTML = `<span class="file-part">${displayName}</span> <span class="upload-status">(Uploaded)</span>`;
                            }
                            
                            fileName.classList.add('uploaded');
                            progressBar.style.width = '100%';
                           
                            // Save upload metadata to Firestore ASYNCHRONOUSLY (non-blocking)
                            saveUploadMetadataAsync(user.uid, inputId, file, downloadURL, storagePath)
                                .catch(firestoreError => {
                                    console.warn('Failed to save metadata to Firestore (non-critical):', firestoreError);
                                });
                           
                            // Special feedback for pitch deck upload
                            if (inputId === 'pitch-deck') {
                                const typingText = document.getElementById('typing-text');
                                if (typingText) {
                                    typingText.innerHTML = `Pitch deck uploaded! Click "Generate Analysis" to extract insights<span class="cursor"></span>`;
                                }
                            }
                           
                        } catch (downloadError) {
                            console.error('Failed to get download URL:', downloadError);
                            fileName.innerHTML = `<span style="color: #e74c3c;">Upload complete but URL failed</span>`;
                            fileName.classList.add('has-error');
                            
                            // Still track the file for processing (use the ref path as fallback)
                            uploadedFiles[inputId] = `gs://${storageRef.bucket.name}/${storageRef.fullPath}`;
                            console.warn('Using Storage path as fallback URL:', uploadedFiles[inputId]);
                        }
                    }
                );
                
            } catch (setupError) {
                console.error('Upload setup error:', setupError);
                
                let errorDisplay = 'Upload setup failed';
                let suggestion = 'Please refresh and try again.';
                
                if (setupError.code === 'storage/unauthorized') {
                    errorDisplay = 'Authentication required';
                    suggestion = 'Please sign in again.';
                } else if (setupError.code === 'storage/quota-exceeded') {
                    errorDisplay = 'Storage quota exceeded';
                    suggestion = 'Your storage quota has reached.';
                } else {
                    errorDisplay = `Setup failed: ${setupError.message}`;
                    suggestion = 'Check your connection and try again.';
                }
                
                fileName.innerHTML = `<span style="color: #e74c3c;">${errorDisplay}</span>`;
                fileName.classList.remove('has-file');
                progressBar.style.width = '0%';
                
                console.error('Detailed setup error:', {
                    code: setupError.code,
                    message: setupError.message,
                    user: user ? user.uid : 'no user'
                });
                
                this.value = '';
            }
        } else {
            fileName.innerHTML = '';
            fileName.classList.remove('has-file', 'uploaded', 'has-error');
            progressBar.style.width = '0%';
            if (uploadedFiles[inputId]) {
                delete uploadedFiles[inputId]; // Remove from tracking
            }
        }
    });
}
// TEMPORARY: Comment out Firestore metadata saving
async function saveUploadMetadataAsync(userId, inputId, file, downloadURL, storagePath) {
    console.log(`[SKIPPED] Would save metadata for ${inputId} to Firestore`);
    console.log('Download URL:', downloadURL);
    return true; // Pretend it succeeded
}
            // Event listeners
            searchInput.addEventListener('input', handleSearchInput);
            searchInput.addEventListener('focus', handleSearchInput);

            // Typing animation and initialization
            const text = window.firebaseAuth.currentUser ? 
                (window.isLocalDevelopment ? "Signed in! File uploads disabled in local development" : "Ready to upload startup documents") : 
                "Please sign in to upload documents";
            const typingElement = document.getElementById('typing-text');
            let index = 0;
            function type() {
                if (index < text.length) {
                    typingElement.innerHTML = text.substring(0, index + 1) + '<span class="cursor"></span>';
                    index++;
                    setTimeout(type, 70);
                } else {
                    typingElement.innerHTML = text + '<span class="cursor"></span>';
                }
            }
            type();

            // Initialize file inputs with enhanced upload tracking
            const fileInputs = [
                { input: 'pitch-deck', name: 'pitch-deck-name', progress: 'pitch-deck-progress' },
                { input: 'transcript', name: 'transcript-name', progress: 'transcript-progress' },
                { input: 'video-content', name: 'video-content-name', progress: 'video-content-progress' },
                { input: 'audio-recordings', name: 'audio-recordings-name', progress: 'audio-recordings-progress' },
                { input: 'other-documents', name: 'other-documents-name', progress: 'other-documents-progress' },
                { input: 'founder-updates', name: 'founder-updates-name', progress: 'founder-updates-progress' }
            ];
           
            fileInputs.forEach(({ input, name, progress }) => {
                setupFileInput(input, name, progress);
            });

            // Initialize KPI toggle
            document.querySelectorAll('.kpi-toggle-btn').forEach(button => {
                button.addEventListener('click', function() {
                    this.classList.toggle('active');
                    this.parentElement.nextElementSibling.classList.toggle('active');
                });
            });

            // Fetch startups from API.market Crunchbase autocomplete endpoint
            async function fetchStartups(query) {
                if (!API_MARKET_KEY || API_MARKET_KEY === 'cmfduc121000pjs0481s34d9e') {
                    console.warn('No valid API.market API key provided. Using mock data.');
                    return startups.filter(startup => startup.name.toLowerCase().includes(query.toLowerCase()));
                }
                try {
                    const response = await fetch('https://api.magicapi.dev/api/v1/magicapi/crunchbase/autocompletes', {
                        method: 'POST',
                        headers: {
                            'accept': 'application/json',
                            'x-magicapi-key': API_MARKET_KEY,
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({ query })
                    });
                    if (!response.ok) {
                        throw new Error(`HTTP error! Status: ${response.status}`);
                    }
                    const data = await response.json();
                    if (!data.data || !Array.isArray(data.data)) {
                        throw new Error('Invalid API response: No data array found');
                    }
                    return data.data.map(item => ({
                        id: item.identifier?.uuid || '',
                        name: item.identifier?.value || 'Unknown',
                        domain: item.properties?.website || 'N/A',
                        short_description: item.short_description || 'No description available'
                    }));
                } catch (error) {
                    console.error('Error fetching from API.market Crunchbase API:', error.message);
                    return startups.filter(startup => startup.name.toLowerCase().includes(query.toLowerCase()));
                }
            }

            // Handle search input with debouncing
            const debouncedHandleSearchInput = debounce(async function () {
                const value = searchInput.value.trim();
               
                if (value.length === 0) {
                    autocompleteBox.style.display = 'none';
                    companyInfo.style.display = 'none';
                    statusPanel.classList.remove('card-visible');
                    return;
                }
               
                const filteredStartups = await fetchStartups(value);
                showAutocomplete(filteredStartups);
            }, 300);

            // Fetch company details from API.market Crunchbase organizations endpoint
            async function fetchCompanyDetails(entityId) {
                if (!API_MARKET_KEY || API_MARKET_KEY === 'cmfduc121000pjs0481s34d9e') {
                    console.warn('No valid API.market API key provided. Using mock data.');
                    return startups.find(startup => startup.id === entityId) || startups[0];
                }
                try {
                    const response = await fetch('https://api.magicapi.dev/api/v1/magicapi/crunchbase/entities/organizations', {
                        method: 'POST',
                        headers: {
                            'accept': 'application/json',
                            'x-magicapi-key': API_MARKET_KEY,
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({ entity_id: entityId })
                    });
                    if (!response.ok) {
                        throw new Error(`HTTP error! Status: ${response.status}`);
                    }
                    const data = await response.json();
                    const properties = data.data.properties;
                    return {
                        id: data.data.identifier.uuid,
                        name: data.data.identifier.value,
                        domain: properties.website || 'N/A',
                        employees: properties.num_employees_enum || 'Unknown',
                        founded: properties.founded_on?.year || 'Unknown',
                        founders: properties.founder_identifiers?.map(f => ({
                            name: f.value,
                            role: f.entity_def_id === 'person' ? 'Founder' : 'Unknown'
                        })) || [],
                        industry: properties.categories?.[0]?.name || 'Unknown',
                        valuation: properties.valuation?.value_usd ? `$${properties.valuation.value_usd / 1e9}B` : 'N/A'
                    };
                } catch (error) {
                    console.error('Error fetching company details from API.market:', error);
                    return startups.find(startup => startup.id === entityId) || startups[0];
                }
            }

            // Handle search input
            async function handleSearchInput() {
                const value = searchInput.value.trim();
               
                if (value.length === 0) {
                    autocompleteBox.style.display = 'none';
                    companyInfo.style.display = 'none';
                    statusPanel.classList.remove('card-visible');
                    return;
                }
               
                const filteredStartups = await fetchStartups(value);
                showAutocomplete(filteredStartups);
            }

            // Show autocomplete suggestions
            function showAutocomplete(items) {
                if (items.length === 0) {
                    autocompleteBox.style.display = 'none';
                    return;
                }
               
                autocompleteBox.innerHTML = '';
               
                items.forEach(item => {
                    const element = document.createElement('div');
                    element.className = 'autocomplete-item';
                    element.innerHTML = `
                        <i class="fas fa-building"></i>
                        <div class="name">${item.name}</div>
                        <div class="domain">${item.domain}</div>
                    `;
                   
                    element.addEventListener('click', () => {
                        selectCompany(item);
                    });
                   
                    autocompleteBox.appendChild(element);
                });
               
                autocompleteBox.style.display = 'block';
            }

            // Fetch company logo from Logo.dev API
            async function fetchCompanyLogo(domain) {
                if (!LOGO_API_KEY || LOGO_API_KEY === 'pk_dxxF1WDbQ1-1tMitIB3bJQ') {
                    console.warn('No valid Logo.dev API key provided. Using fallback.');
                    return `https://logo.clearbit.com/${domain}`;
                }
                try {
                    const response = await fetch(`https://logo.dev/api/v1/logo?domain=${domain}&api_key=${LOGO_API_KEY}`);
                    const data = await response.json();
                    return data.logo_url || `https://logo.clearbit.com/${domain}`;
                } catch (error) {
                    console.error('Error fetching logo:', error);
                    return `https://logo.clearbit.com/${domain}`;
                }
            }

            // Generate founder avatar using UI Avatars
            function getFounderAvatar(name) {
                return `https://ui-avatars.com/api/?name=${encodeURIComponent(name)}&size=50&background=7f8c8d&color=fff`;
            }

            // Handle company selection
            async function selectCompany(item) {
                searchInput.value = item.name;
                autocompleteBox.style.display = 'none';
               
                const company = await fetchCompanyDetails(item.id);
               
                const searchContainer = document.querySelector('.search-container');
                companyInfo.style.top = `${searchContainer.offsetTop + searchContainer.offsetHeight}px`;
               
                statusPanel.classList.add('card-visible');
               
                const logoUrl = await fetchCompanyLogo(company.domain);
               
                companyInfo.innerHTML = `
                    <div class="company-header">
                        <div class="company-logo">
                            <img src="${logoUrl}" alt="${company.name} logo" onerror="this.src='https://via.placeholder.com/80?text=Logo'">
                        </div>
                        <div class="company-details">
                            <h2>${company.name}</h2>
                            <div class="company-domain">${company.domain}</div>
                            <div class="attribution">Powered by <a href="http://www.crunchbase.com" target="_blank">Crunchbase</a></div>
                        </div>
                    </div>
                   
                    <div class="info-grid">
                        <div class="info-card">
                            <div class="info-icon">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="info-content">
                                <h3>Employees</h3>
                                <p>${company.employees}</p>
                            </div>
                        </div>
                       
                        <div class="info-card">
                            <div class="info-icon">
                                <i class="fas fa-calendar-alt"></i>
                            </div>
                            <div class="info-content">
                                <h3>Founded</h3>
                                <p>${company.founded}</p>
                            </div>
                        </div>
                       
                        <div class="info-card">
                            <div class="info-icon">
                                <i class="fas fa-industry"></i>
                            </div>
                            <div class="info-content">
                                <h3>Industry</h3>
                                <p>${company.industry}</p>
                            </div>
                        </div>
                       
                        <div class="info-card">
                            <div class="info-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="info-content">
                                <h3>Valuation</h3>
                                <p>${company.valuation}</p>
                            </div>
                        </div>
                    </div>
                   
                    <div class="founders-section">
                        <h3>Founders</h3>
                        <div class="founders-grid">
                            ${company.founders.length > 0 ? company.founders.map(founder => `
                                <div class="founder-card">
                                    <div class="founder-avatar">
                                        <img src="${getFounderAvatar(founder.name)}" alt="${founder.name} avatar">
                                    </div>
                                    <div class="founder-details">
                                        <h4>${founder.name}</h4>
                                        <p>${founder.role}</p>
                                    </div>
                                </div>
                            `).join('') : '<p>No founder information available</p>'}
                        </div>
                    </div>
                `;
               
                companyInfo.style.display = 'block';
                companyInfo.classList.add('visible');
                companyInfo.classList.remove('moving');
            }

            // Close autocomplete when clicking outside
            document.addEventListener('click', (e) => {
                if (!searchInput.contains(e.target) && !autocompleteBox.contains(e.target)) {
                    autocompleteBox.style.display = 'none';
                }
            });
        }
    </script>
</body>
</html> 